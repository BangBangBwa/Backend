<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="FollowMapper">
  <insert id="save" parameterType="follow" keyProperty="id">
    INSERT INTO follow (
      follower_id,    followee_id,    followed_at,    created_at,   created_id,
      updated_at,     updated_id
    ) VALUES (
      #{followerId},  #{followeeId},  #{followedAt},  #{createdAt}, #{createdId},
      #{updatedAt},   #{updatedId}
    )
  </insert>

  <select id="findAllFollowers" resultType="com.bangbangbwa.backend.domain.member.common.dto.FollowDto">
    SELECT f.id as member_id,
           f.profile as profile_image_url,
           f.name as member_name,
    FROM follow f
        INNER JOIN member m
                ON m.id = f.followee_id
    WHERE f.followee_id = #{memberId}
  </select>
</mapper>